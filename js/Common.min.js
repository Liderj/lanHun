var msg={charset:"utf-8",getcookie:function(c){var b=document.cookie.indexOf(c+"=");var a=document.cookie.indexOf(";",b);return b==-1?"":unescape(document.cookie.substring(b+c.length+1,(a>b?a:document.cookie.length)))},in_array:function(c,a){if(typeof c=="string"||typeof c=="number"){for(var b in a){if(a[b]==c){return true}}}return false},setcookie:function(a,b,f,e,c,g){var d=new Date();d.setTime(d.getTime()+f);document.cookie=escape(a)+"="+escape(b)+(d?"; expires="+d.toGMTString():"")+(e?"; path="+e:"/")+(c?"; domain="+c:"")+(g?"; secure":"")},getQuery:function(a){var f=window.location.search;if(f.indexOf("?")!=-1){var c=f.substr(1).split("&");var e={};var d=[];var b="";for(i=0;i<c.length;i++){d=c[i].split("=");b=decodeURIComponent(d[0]);if(b.substr(-2)=="[]"){if(!e[b]){e[b]=[]}e[b].push(d[1])}else{e[b]=d[1]}}if(a){if(e[a]){return e[a]}return null}else{return e}}},reload:function(a,b){a=a||"";b=b||1;re=/^http(s)?:\/\/(([^\/\.]+\.)*)?(qq\.com)(\/.*)*$/;re1=/^http(s)?:\/\//;setTimeout(function(){if(re.test(a)){window.location.href=a}else{if(a&&!re1.test(a)){window.location.href="http://"+window.location.hostname+a}else{window.location.reload()}}},b)},open:function(a){re1=/^http(s)?:\/\//;if(a&&!re1.test(a)){a="http://"+window.location.hostname+a}if(typeof mqq!=="undefined"&&mqq.version&&mqq.device.isMobileQQ()){a=a.indexOf("?")===-1?a+"?":a+"&";a=a.replace(/\&webview\=[^\&]+/g,"")+"webview=new";mqq.ui.openUrl({url:a,target:1,style:0});return true}jQuery.DIC.reload(a)},goBack:function(a){var a=a||"";if(mqq&&mqq.version&&mqq.device.isMobileQQ()){if(/(\?|\&)webview=new/.test(window.location.href)){mqq.ui.popBack();return true}}if(a){jq.DIC.reload(a);return true}history.go(-1)},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},isObjectEmpty:function(a){for(i in a){return false}return true},strlen:function(a){return(/msie/.test(navigator.userAgent.toLowerCase())&&a.indexOf("\n")!==-1)?a.replace(/\r?\n/g,"_").length:a.length},mb_strlen:function(c){var b=0;for(var a=0;a<c.length;a++){b+=c.charCodeAt(a)<0||c.charCodeAt(a)>255?(jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2):1}return b},mb_cutstr:function(f,d,a){var c=0;var e="";var a=!a&&a!==""?"...":a;d=d-a.length;for(var b=0;b<f.length;b++){c+=f.charCodeAt(b)<0||f.charCodeAt(b)>255?(jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2):1;if(c>d){e+=a;break}e+=f.substr(b,1)}return e},strLenCalc:function(e,f,d){var g=e.value,d=!d?200:d,a=d,c=jQuery.DIC.strlen(g);for(var b=0;b<g.length;b++){if(g.charCodeAt(b)<0||g.charCodeAt(b)>127){a-=2}else{a-=1}}jQuery("#"+f).html(Math.floor(a/2))},dialog:function(a){setTimeout(function(){msg._dialog(a)},5)},_dialog:function(y){var y=y||{};var p=y.id||"tips";var j="fwin_dialog_"+p;var v="fwin_mask_"+p;if(!y.content){document.ontouchmove=function(A){return true};jQuery("#"+j).remove();jQuery("#"+v).remove();return false}var z=y.title||"提示信息";var f=y.content||"";var c=y.okValue||false;var b=y.cancelValue||false;var u=y.isMask||false;var q=$('div[id^="fwin_dialog_"]').length||0;var x=10000+q*10;var o=x+1;var w="position:absolute;top:-0px;left:-0px;width:"+jQuery(document).width()+"px;height:"+jQuery(document).height()+"px;background:#000;filter:alpha(opacity=60);opacity:0.5; z-index:"+x+";";var t=y.isHtml||false;var a=y.autoClose||false;var s=y.isConfirm||false;var r="";switch(y.icon){case"success":r="icon_success";break;case"none":r="";break;case"error":default:r="g-layer-tips";break}var h=[];if(u){var m=[];m.push("<div id="+v+' class="g-mask" style="'+w+'"></div>');var l=m.join("");jQuery(l).appendTo("body");document.ontouchmove=function(A){A.preventDefault()}}if(t){h.push('<div style="width:100%;position:fixed;z-index:'+o+';" id="'+j+'">'+f+"</div>")}else{if(!y.title&&!c&&!b){h.push('<div style="position:fixed;z-index:'+o+';" id="'+j+'"><div class="tips">');if(p=="loading"){h.push('<div class="loadInco tipL" style="vertical-align: -5px;"><span class="blockG" id="rotateG_01"></span><span class="blockG" id="rotateG_02"></span><span class="blockG" id="rotateG_03"></span><span class="blockG" id="rotateG_04"></span><span class="blockG" id="rotateG_05"></span><span class="blockG" id="rotateG_06"></span><span class="blockG" id="rotateG_07"></span><span class="blockG" id="rotateG_08"></span></div> ')}h.push(f+"</div></div>")}else{if(s){if(confirm(f)){if(typeof y.ok=="function"){y.ok()}}else{if(typeof y.cancel=="function"){y.cancel()}}return true}else{h.push('<div style="min-width:350px;position:fixed;z-index:'+o+';" id="'+j+'"><span class="close"></span>');h.push('<div class="popLayer pSpace" style="width:80%">');h.push('<p class="editTCon">'+f+"</p>");h.push('<div class="editArea">');h.push(c?'<a href="javascript:;" class="editBtn1 db" title="">'+c+"</a>":"");h.push(b?'<a href="javascript:;" class="editBtn2 db" title="">'+b+"</a>":"");h.push("</div></div>")}}}var g=h.join("");if(jQuery("#"+j)[0]){jQuery("#"+j).remove();jQuery("#"+v).remove()}jQuery(g).appendTo("body");var e=jQuery(window).width();var d=jQuery(window).height();k=(e-jQuery("#"+j).outerWidth())/2;n=(d-jQuery("#"+j).height())*0.382;var k=y.left||k;var n=typeof y.top==="undefined"?n:y.top;jQuery("#"+j).css({top:n+"px",left:k+"px"});jQuery("#"+j+" .close").click(function(){if(u){document.ontouchmove=function(B){return true}}var A=true;if(typeof y.close=="function"){A=y.close()}if(A){jQuery("#"+v).hide();jQuery("#"+v).remove();jQuery("#"+j).hide();jQuery("#"+j).remove()}});if(typeof y.callback=="function"){if(u){document.ontouchmove=function(A){A.preventDefault()}}y.callback()}if(typeof y.ok=="function"){jQuery("#"+j+" .editBtn1").click(function(){y.ok()})}if(typeof y.cancel=="function"){jQuery("#"+j+" .editBtn2").click(function(){y.cancel()})}if(jQuery("#"+j+" .editBtn1")[0]){jQuery("#"+j+" .editBtn1").click(function(){jQuery("#"+j+" .close").click()})}if(jQuery("#"+j+" .editBtn2")[0]){jQuery("#"+j+" .editBtn2").click(function(){jQuery("#"+j+" .close").click()})}if(!y.title&&!c&&!b&&a){a=a>1?a:1000;setTimeout(function(){jQuery("#"+j).fadeOut("slow",function(){jQuery("#"+v).hide();jQuery("#"+v).remove();jQuery("#"+j).hide();jQuery("#"+j).remove();if(typeof y.close=="function"){y.close()}})},a)}},timerId:false,initTouch:function(e){var d=e.obj||document;var f,g,a,b,c;function k(l){var m=l.touches[0];g=m.pageY;f=m.pageX;a=m.pageX;b=m.pageY;if(typeof e.start=="function"){e.start(l)}}function j(l){window.clearInterval(jq.DIC.timerId);touch=l.touches[0];a=touch.pageX;b=touch.pageY;if(document.body.scrollTop<=0&&(g-b)<=0&&jQuery.os.ios){l.preventDefault()}if(typeof e.move=="function"){var m={x:f-a,y:g-b};e.move(l,m)}if(!jQuery.os.ios){jq.DIC.timerId=window.setTimeout(function(){h()},50)}}function h(l){if(typeof e.end=="function"){var m={x:f-a,y:g-b};e.end(l,m)}}d.addEventListener("touchstart",k,false);d.addEventListener("touchmove",j,false);if(jQuery.os.ios){d.addEventListener("touchend",h,false)}},showLoading:function(b,c,a){var b=b||"block";var a=a||false;c=c||"正在加载...";if(b=="block"){jQuery.DIC.dialog({id:"loading",content:c,noMask:true,autoClose:a})}else{jQuery.DIC.dialog({id:"loading"})}},ajax:function(e,b,d){var d=d||{};var c="";e=e.indexOf("?")===-1?e+"?":e+"&";e=e.replace(/\&resType\=[^\&]+/g,"")+"resType=json";e=e.replace(/\&isAjax\=1/g,"")+"&isAjax=1";var a={url:e,data:b,cache:d.cache||false,processData:d.isUpload,contentType:d.isUpload?false:"application/x-www-form-urlencoded",type:b?"POST":"GET",dataType:d.dataType||"json",timeout:d.timeout||30000,jsonp:d.dataType==="jsonp"?"callback":null,jsonpCallback:d.dataType==="jsonp"?d.success:null,beforeSend:function(h,f){if(d.requestIndex){if(d.requestMode=="block"){if(jQuery.ajax._requestCache[d.requestIndex]){return false}}else{if(d.requestMode=="abort"){if(jQuery.ajax._requestCache[d.requestIndex]){jQuery.ajax._requestCache[d.requestIndex].abort()}}}}var g=true;if(typeof d.beforeSend=="function"){g=d.beforeSend(h,f)}if(g){jQuery.ajax._requestCache[d.requestIndex]=h;if(!d.noShowLoading){c=setTimeout(function(){jQuery.DIC.showLoading()},100)}}return g}}}};var Weixin={Share:function(img,width,height,title,desc,url,appid,dosuccess,dofail){img=img||"http://a.zhixun.in/plug/img/ico-share.png";width=width||100;height=height||100;title=title||document.title;desc=desc||document.title;url=url||document.location.href;appid=appid||"";dosuccess=dosuccess||"";dofail=dofail||"";function _ShareFriend(){WeixinJSBridge.invoke("sendAppMessage",{appid:appid,img_url:img,img_width:width,img_height:height,link:url,desc:desc,title:title},function(res){_report("send_msg",res.err_msg)})}function _ShareTL(){WeixinJSBridge.invoke("shareTimeline",{img_url:img,img_width:width,img_height:height,link:url,desc:desc,title:title},function(res){_report("timeline",res.err_msg)})}function _ShareWB(){WeixinJSBridge.invoke("shareWeibo",{content:desc,url:url,},function(res){_report("weibo",res.err_msg)})}function _report(type,msg){if(type=="timeline"){switch(msg){case"share_timeline:cancel":eval(dofail);break;case"share_timeline:confirm":case"share_timeline:ok":eval(dosuccess);break}}else{if(type=="send_msg"){switch(msg){case"send_app_msg:cancel":eval(dofail);break;case"send_app_msg:confirm":case"send_app_msg:ok":eval(dosuccess);break}}}}document.addEventListener("WeixinJSBridgeReady",function onBridgeReady(){WeixinJSBridge.on("menu:share:appmessage",function(argv){_ShareFriend()});WeixinJSBridge.on("menu:share:timeline",function(argv){_ShareTL()});WeixinJSBridge.on("menu:share:weibo",function(argv){_ShareWB()})},false)},ImagePreview:function(a,b){var c=[];$(b).each(function(){c.push("http://"+location.host+$(this).attr("src"))});WeixinJSBridge.invoke("imagePreview",{current:a,urls:c},function(d){_report("preview",d.err_msg)})}};var WxJS={Config:function(b){var a=b.appid||"";var e=b.timestamp||"";var c=b.noncestr||"";var d=b.signature||"";wx.config({debug:false,appId:a,timestamp:e,nonceStr:c,signature:d,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]})},Share:function(shareData,dosuccess,dofail){var img=shareData.img||"";var url=shareData.url||document.location.href;var desc=shareData.desc||document.title;var title=shareData.title||document.title;dosuccess=dosuccess||"";dofail=dofail||"";wx.ready(function(){var shareData=WxJS.ShareData;wx.onMenuShareAppMessage({title:title,desc:desc,link:url,imgUrl:img,trigger:function(res){},success:function(res){eval(dosuccess)},cancel:function(res){eval(dofail)},fail:function(res){}});wx.onMenuShareTimeline({title:title,desc:desc,link:url,imgUrl:img,trigger:function(res){},success:function(res){SendSuccess()},cancel:function(res){SendError()},fail:function(res){}});wx.onMenuShareQQ({title:title,desc:desc,link:url,imgUrl:img,trigger:function(res){},complete:function(res){},success:function(res){SendSuccess()},cancel:function(res){SendError()},fail:function(res){}});wx.onMenuShareWeibo({title:title,desc:desc,link:url,imgUrl:img,trigger:function(res){},complete:function(res){},success:function(res){SendSuccess()},cancel:function(res){SendError()},fail:function(res){}})})},ImagePreview:function(a,b){var c=[];$(b).each(function(){c.push("http://"+location.host+$(this).attr("src"))});WeixinJSBridge.invoke("imagePreview",{current:a,urls:c},function(d){_report("preview",d.err_msg)})},ShowOptionMenu:function(){wx.showOptionMenu()},HideOptionMenu:function(){wx.hideOptionMenu()},ShowToolbar:function(){wx.showToolbar()},HideToolbar:function(){wx.hideToolbar()}};function alert(str,title,callback){$("#alert_box").remove();$alert_css="<style>#alert_warp{height:100%; width:100%; position:fixed; _position:absolute; top:0; z-index:1000;background-color: rgba(0, 0, 0, 0.4);}#alert_box{display:none;padding: 10px;width: 240px;left:50%;margin-left:-130px;background-color: rgba(0,0,0,0.8);border-radius: 6px;color: #fff;position: fixed;z-index:1001;}#alert_close{display: block;width: 100%;-webkit-tap-highlight-color:rgba(0,0,0,0);height: 30px;margin:0;text-align: right;}#alert_title{float: left;line-height: 30px;color: #999;}#alert_close img{width: 26px;}#alert_msg{text-align: center;margin-top: 4px;}#confirm{-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1.2em;display: inherit;text-decoration: none;color:#fff;text-align: center;margin: 0;padding: 8px;}</style>";$html='<div id="alert_warp"><div id="alert_box"><p id="alert_close">';if(title){$html+='<span id="alert_title">'+title+"</span>"}$html+='<img src="/images/icon_close1.png" /></p><p id="alert_msg">'+str+'</p><p id="confirm">确 定</p></div></div>';$("body").append($alert_css+$html);$("#alert_box").fadeIn("fast");$half_height=$(window).height()/2;$msgboxheight=$("#alert_box").height()/2;$("#alert_box").css("bottom",$half_height+"px");$("#alert_box").css("margin-bottom","-"+$msgboxheight+"px");$("#confirm").click(function(){$("#alert_box").fadeOut("slow",function(){$("#alert_warp").remove();if(typeof(callback)=="string"){eval(callback)}else{if(callback){callback()}}})});$("#alert_close").click(function(){$("#alert_warp").fadeOut("slow",function(){$("#alert_warp").remove()})})}function alertMsg(b,a){window.scrollTo(0,-1);$(".msgwindow").slideToggle("slow");$(".msgwindow .msgtxt").html(b);if(a==undefined){a=4000}if(a>0){setTimeout(function(){$(".msgwindow").slideUp(500)},a)}}function CloseBtn(a){$(a).parent().parent().slideUp(500)}function AlertDialog(a){window.scrollTo(0,-1);$(".msgdialog .msgcontent").html(a);$(".msgdialog").slideToggle("slow");$("#txtUserName").focus()};